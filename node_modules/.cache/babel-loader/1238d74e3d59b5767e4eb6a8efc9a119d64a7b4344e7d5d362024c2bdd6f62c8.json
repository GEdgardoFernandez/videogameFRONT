{"ast":null,"code":"import{GET_ALL_GAMES,GET_GAME_ID,GET_GAME_NAME,CREATE_GAME,GET_GENRES,ORDER_BY_NAME,FILTER_BY_SOURCE,SEARCH_GAMES_BY_NAME,GET_PLATFORMS}from'./Actions';const initialState={allGames:[],filteredGames:[],videogames:[],videogame:[],genres:[],platforms:[],sourceFilter:'both',restoreGames:[]};function rootReducer(){let state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialState;let action=arguments.length>1?arguments[1]:undefined;switch(action.type){case GET_ALL_GAMES:const uniqueGames=action.payload.filter((game,index,self)=>index===self.findIndex(g=>g.id===game.id));let platforms=[];action.payload.map(e=>platforms=[...platforms,...e.platforms]);return{...state,allGames:uniqueGames,filteredGames:uniqueGames,restoreGames:uniqueGames,platforms:Array.from(new Set(platforms))};case GET_GAME_ID:return{...state,videogame:action.payload};case SEARCH_GAMES_BY_NAME:return{...state,filteredGames:action.payload};case GET_GAME_NAME:return{...state,filteredGames:action.payload};case CREATE_GAME:console.log(action.payload);return{...state,videogame:[...state.videogame,action.payload]};case GET_GENRES:return{...state,genres:action.payload};case GET_PLATFORMS:return{...state,platforms:action.payload};case ORDER_BY_NAME:let sortedGames=[...state.filteredGames];if(action.payload==='A-Z'){sortedGames.sort((a,b)=>a.name.localeCompare(b.name));}else if(action.payload==='Z-A'){sortedGames.sort((a,b)=>b.name.localeCompare(a.name));}else if(action.payload==='Highest-Rating'){sortedGames.sort((a,b)=>b.rating-a.rating);}else if(action.payload==='Lowest-Rating'){sortedGames.sort((a,b)=>a.rating-b.rating);}return{...state,filteredGames:sortedGames};case FILTER_BY_SOURCE:let sourceFilteredGames=[];if(action.payload==='api'){sourceFilteredGames=state.allGames.filter(game=>typeof game.id==='number');}else if(action.payload==='db'){sourceFilteredGames=state.allGames.filter(game=>typeof game.id!==\"number\");}else{sourceFilteredGames=state.restoreGames;}return{...state,filteredGames:sourceFilteredGames};default:return state;}}export default rootReducer;","map":{"version":3,"names":["GET_ALL_GAMES","GET_GAME_ID","GET_GAME_NAME","CREATE_GAME","GET_GENRES","ORDER_BY_NAME","FILTER_BY_SOURCE","SEARCH_GAMES_BY_NAME","GET_PLATFORMS","initialState","allGames","filteredGames","videogames","videogame","genres","platforms","sourceFilter","restoreGames","rootReducer","state","arguments","length","undefined","action","type","uniqueGames","payload","filter","game","index","self","findIndex","g","id","map","e","Array","from","Set","console","log","sortedGames","sort","a","b","name","localeCompare","rating","sourceFilteredGames"],"sources":["C:/Users/bff08/Desktop/PI-Videogames-main/client/src/Redux/Reducer.js"],"sourcesContent":["import {\n  GET_ALL_GAMES,\n  GET_GAME_ID,\n  GET_GAME_NAME,\n  CREATE_GAME,\n  GET_GENRES,\n  ORDER_BY_NAME,\n  FILTER_BY_SOURCE,\n  SEARCH_GAMES_BY_NAME,\n  GET_PLATFORMS,\n} from './Actions';\n\nconst initialState = {\n  allGames: [],\n  filteredGames: [],\n  videogames: [],\n  videogame: [],\n  genres: [],\n  platforms: [],\n  sourceFilter: 'both',\n  restoreGames: [],\n}\n\nfunction rootReducer(state = initialState, action) {\n\n  switch (action.type) {\n    case GET_ALL_GAMES:\n      const uniqueGames = action.payload.filter(\n        (game, index, self) => index === self.findIndex(g => g.id === game.id)\n      );\n      let platforms = [];\n      action.payload.map(e => platforms = [...platforms, ...e.platforms]);\n      return {\n        ...state,\n        allGames: uniqueGames,\n        filteredGames: uniqueGames,\n        restoreGames: uniqueGames,\n        platforms: Array.from(new Set(platforms)),\n      };\n\n    case GET_GAME_ID:\n      return {\n        ...state,\n        videogame: action.payload\n      };\n    case SEARCH_GAMES_BY_NAME:\n\n      return {\n        ...state,\n        filteredGames: action.payload\n\n      };\n    case GET_GAME_NAME:\n      return {\n        ...state,\n        filteredGames: action.payload\n\n      };\n\n    case CREATE_GAME:\n      console.log(action.payload)\n      return {\n        ...state,\n        videogame: [...state.videogame, action.payload],\n      };\n    case GET_GENRES:\n      return {\n        ...state,\n        genres: action.payload\n      };\n    case GET_PLATFORMS:\n      return {\n        ...state,\n        platforms: action.payload\n      }\n    case ORDER_BY_NAME:\n      let sortedGames = [...state.filteredGames];\n      if (action.payload === 'A-Z') {\n        sortedGames.sort((a, b) => a.name.localeCompare(b.name));\n      } else if (action.payload === 'Z-A') {\n        sortedGames.sort((a, b) => b.name.localeCompare(a.name));\n      } else if (action.payload === 'Highest-Rating') {\n        sortedGames.sort((a, b) => b.rating - a.rating);\n      } else if (action.payload === 'Lowest-Rating') {\n        sortedGames.sort((a, b) => a.rating - b.rating);\n      }\n      return {\n        ...state,\n        filteredGames: sortedGames,\n      };\n\n    case FILTER_BY_SOURCE:\n      let sourceFilteredGames = [];\n      if (action.payload === 'api') {\n        sourceFilteredGames = state.allGames.filter(game => typeof game.id === 'number');\n      } else if (action.payload === 'db') {\n        sourceFilteredGames = state.allGames.filter(game => typeof game.id !== \"number\");\n      } else {\n        sourceFilteredGames = state.restoreGames;\n      }\n      return {\n        ...state,\n        filteredGames: sourceFilteredGames,\n      };\n    default: return state\n  }\n}\n\nexport default rootReducer"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}